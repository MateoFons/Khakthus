<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabla de usuarios</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link href="/css/table.css" rel="stylesheet">
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="js/tableUser.js"></script>

</head>

<body>
    <div class="topnav">
        <a class="navbar-dark" href="index.html">
            <img src="images/Logo-mini-menu.png" width="40" height="30" alt="contra corriente">
        </a>
        <a class="navbar-dark" href="tableUser.html">
            Usuarios
        </a>
        <a class="navbar-dark" href="tableProduct.html">
            Productos
        </a>
    </div>
    <section class="contact-box">
        <div class="w3-animate-opacity row no-gutters bg-dark">
            <div id="myListUser" class="container p-6">
                <div id="productForm-box" class="col-md-12">
                    <h1 class="text-center font-weight-bold mb-3">Tabla de usuarios</h1>
                </div>
                <div class="row justify-content-center" style="display:block;width:100%;overflow-x:auto;"
                    id="tableResponse"></div>
                <button class="open-button" onclick="openFormCreate()" id="btnForm">Añadir usuario</button>

                <div class="w3-animate-opacity row no-gutters bg-dark form-popup" id="myForm">
                    <form id="userForm" class="row g-3" action="" method="post">
                        <h3 class="text-center font-weight-bold mb-3">Formulario de usuario</h3>
                        <div class="form-group">
                            <label for="identificationUser" class="font-weight-bold">Identificación:<span
                                    class="text-danger">*</span></label>
                            <input type="number" name="identificationUser" id="identificationUser" class="form-control"
                                required />
                        </div>
                        <br>
                        <div class="form-group">
                            <label for="nameUser" class="font-weight-bold">Nombre<span
                                    class="text-danger">*</span></label><br />
                            <input type="text" name="nameUser" id="nameUser" class="form-control" required>
                        </div>
                        <br>
                        <div class="col-md-6">
                            <label for="addressUser" class="font-weight-bold form-label">Dirección<span
                                    class="text-danger">*</span></label>
                            <input type="text" name="addressUser" id="addressUser" class="form-control" required>
                        </div>
                        <div class="col-md-6">
                            <label for="cellPhoneUser" class="font-weight-bold form-label">Celuar<span
                                    class="text-danger">*</span></label>
                            <input type="number" name="cellPhoneUser" id="cellPhoneUser" class="form-control" required>
                        </div>
                        <br>
                        <div class="form-group">
                            <label for="emailUser" class="font-weight-bold">Email<span
                                    class="text-danger">*</span></label>
                            <input type="email" name="emailUser" id="emailUser" class="form-control" required>
                        </div>
                        <br>
                        <div class="col-md-6">
                            <label for="passwordUser" class="font-weight-bold">Contraseña<span
                                    class="text-danger">*</span></label>
                            <input type="password" name="passwordUser" id="passwordUser" class="form-control" required>
                        </div>
                        <br>
                        <div class="col-md-6">
                            <label for="zoneUser" class="font-weight-bold">Zona<span
                                    class="text-danger">*</span></label>
                            <select name="zoneUser" id="zoneUser" class="form-control" required>
                                <option selected value="">Selecciona Zona</option>
                                <option value="ZONA 1">ZONA 1 - LAURELES</option>
                                <option value="ZONA 2">ZONA 2 - EL POBLADO</option>
                                <option value="ZONA 3">ZONA 3 - ROBLEDO</option>
                                <option value="ZONA 4">ZONA 4 - BELÉN</option>
                                <option value="ZONA 5">ZONA 5 - LA AMÉRICA</option>
                                <option value="ZONA 6">ZONA 6 - BUENOS AIRES</option>
                                <option value="ZONA 7">ZONA 7 - CANDELARIA</option>
                                <option value="ZONA 8">ZONA 8 - ARANJUEZ</option>
                            </select>
                        </div>
                        <br>
                        <div class="form-group mb-5">
                            <label for="typeUser" class="font-weight-bold">Tipo Usuario<span
                                    class="text-danger">*</span></label>
                            <select name="typeUser" id="typeUser" class="form-control" required>
                                <option selected value="">Selecciona tipo de usuario</option>
                                <option value="COORD">Coordinador de zona</option>
                                <option value="ASES">Asesor Comercial</option>
                            </select>
                        </div>
                        <br>
                        <div class="col-md-3">
                            <input type="button" name="createUser" class="form-btn btn-dark width-100" value="Crear"
                                onclick="createTableUser()" id="btnCreate" />
                        </div>
                        <div class="col-md-4">
                            <input type="button" name="updateUser" class="form-btn btn-dark width-100"
                                value="Actualizar" onclick="updateUser2(idUpdate)" id="btnUpdate" />
                        </div>
                        <div class="col-md-4">
                            <input type="button" class="form-btn btn-dark width-100" value="Cerrar"
                                onclick="closeForm()" />
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>
    <div id="myListUser"></div>
    <script>
        window.onload = getUser();
    </script>

    <script>
        var idUpdate = 0;
        function openFormCreate() {
            document.getElementById("myForm").style.display = "block";
            $('#btnCreate').prop('disabled', false);
            $('#btnUpdate').prop('disabled', true);
        }

        function openFormUpdate(obj) {
            try {
                const objUser = JSON.parse(atob(obj));
                idUpdate = objUser.id;
                document.getElementById("myForm").style.display = "block";
                $('#btnCreate').prop('disabled', true);
                $('#btnUpdate').prop('disabled', false);
                $("#identificationUser").val(objUser.identification);
                $("#nameUser").val(objUser.name);
                $("#addressUser").val(objUser.address);
                $("#cellPhoneUser").val(objUser.cellPhone);
                $("#emailUser").val(objUser.email);
                $("#passwordUser").val(objUser.password);
                $("#zoneUser").val(objUser.zone);
                $("#typeUser").val(objUser.type);

            } catch (error) {
                console.log(error);
            }

        }
        function closeForm() {
            document.getElementById("myForm").style.display = "none";
            $("#identificationUser").val("");
            $("#nameUser").val("");
            $("#addressUser").val("");
            $("#cellPhoneUser").val("");
            $("#emailUser").val("");
            $("#passwordUser").val("");
            $("#zoneUser").val("");
            $("#typeUser").val("");
        }
    </script>

</body>

</html>