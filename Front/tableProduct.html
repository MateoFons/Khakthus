<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabla de productos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link href="/css/table.css" rel="stylesheet">
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="js/tableProduct.js"></script>
</head>

<body>
    <div class="topnav">
        <a class="navbar-dark" href="index.html">
            <img src="images/Logo-mini-menu.png" width="40" height="30" alt="contra corriente">
        </a>
        <a class="navbar-dark" href="tableUser.html">
            Usuarios
        </a>
        <a class="navbar-dark" href="tableProduct.html">
            Productos
        </a>
    </div>
    <section class="contact-box">
        <div class="w3-animate-opacity row no-gutters bg-dark">
            <div id="myListUser" class="container p-6">
                <div id="productForm-box" class="col-md-12">
                    <h1 class="text-center font-weight-bold mb-3">Tabla de productos</h1>
                </div>
                <div class="row justify-content-center" style="display:block;width:100%;overflow-x:auto;"
                    id="tableResponse"></div>
                <button class="open-button" onclick="openFormCreate()">Nuevo producto</button>

                <div class="w3-animate-opacity row no-gutters bg-dark form-popup" id="myForm">
                    <form id="userForm" class="row g-3" action="" method="post">
                        <h3 class="text-center font-weight-bold mb-3">Registrar Producto</h3>
                        <div class="form-group">
                            <label for="brandProd" class="font-weight-bold">Marca<span
                                    class="text-danger">*</span></label>
                            <input type="text" name="brandProd" id="brandProd" class="form-control" required />
                        </div>
                        <br>
                        <div class="form-group">
                            <label for="modelProd" class="font-weight-bold">Modelo<span
                                    class="text-danger">*</span></label>
                            <input type="text" name="modelProd" id="modelProd" class="form-control" required>
                        </div>
                        <br>
                        <div class="form-group">
                            <label for="procesorProd" class="font-weight-bold">Procesador<span
                                    class="text-danger">*</span></label>
                            <input type="text" name="procesorProd" id="procesorProd" class="form-control" required>
                        </div>
                        <br>
                        <div class="form-group">
                            <label for="osProd" class="font-weight-bold">Sistema Operativo<span
                                    class="text-danger">*</span></label>
                            <input type="text" name="osProd" id="osProd" class="form-control" required>
                        </div>
                        <br>
                        <div class="form-group">
                            <label for="descriptionProd" class="font-weight-bold">Descripci√≥n</label>
                            <input type="text" name="descriptionProd" id="descriptionProd" class="form-control"
                                required>
                        </div>
                        <br>
                        <div class="form-group">
                            <label for="memoryProd" class="font-weight-bold">Memoria<span
                                    class="text-danger">*</span></label>
                            <input type="number" name="memoryProd" id="memoryProd" class="form-control" required>
                        </div>
                        <br>
                        <div class="form-group">
                            <label for="hardDriveProd" class="font-weight-bold">Disco duro<span
                                    class="text-danger">*</span></label>
                            <input type="text" name="hardDriveProd" id="hardDriveProd" class="form-control" required>
                        </div>
                        <br>
                        <div class="form-group">
                            <label for="availabilityProd" class="font-weight-bold">Disponibilidad<span
                                    class="text-danger">*</span></label>
                            <select name="availabilityProd" id="availabilityProd" class="form-control" required>
                                <option selected value="">Selecciona disponibilidad</option>
                                <option value="true">Disponible</option>
                                <option value="false">No disponible</option>
                            </select>
                        </div>
                        <br>
                        <div class="form-group">
                            <label for="priceProd" class="font-weight-bold">Precio<span
                                    class="text-danger">*</span></label>
                            <input type="number" name="priceProd" id="priceProd" class="form-control" required>
                        </div>
                        <br>
                        <div class="form-group">
                            <label for="quantityProd" class="font-weight-bold">Cantidad<span
                                    class="text-danger">*</span></label>
                            <input type="number" name="quantityProd" id="quantityProd" class="form-control" required>
                        </div>
                        <br>
                        <div class="form-group mb-5">
                            <label for="photography" class="font-weight-bold">Cargar imagen URL<span
                                    class="text-danger">*</span></label>
                            <input type="url" name="photography" id="photography" class="form-control"
                                placeholder="https://example.com" pattern="https://.*" size="30" required>
                        </div>
                        <br>
                        <div class="col-md-3">
                            <input type="button" name="createUser" class="form-btn btn-dark width-100" value="Crear"
                                onclick="createProduct()" id="btnCreate" />
                        </div>
                        <div class="col-md-4">
                            <input type="button" name="updateUser" class="form-btn btn-dark width-100"
                                value="Actualizar" onclick="updateProduct(idUpdate)" id="btnUpdate" />
                        </div>
                        <div class="col-md-4">
                            <input type="button" class="form-btn btn-dark width-100" value="Cerrar"
                                onclick="closeForm()" />
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>
    <div id="myListUser"></div>
    <script>
        window.onload = getProduct();
    </script>

    <script>
        function openFormCreate() {
            document.getElementById("myForm").style.display = "block";
            $('#btnCreate').prop('disabled', false);
            $('#btnUpdate').prop('disabled', true);
        }

        function openFormUpdate(obj) {
            const objUser = JSON.parse(atob(obj));
            idUpdate = objUser.id;
            document.getElementById("myForm").style.display = "block";
            $("#brandProd").val(objUser.brand);
            $("#modelProd").val(objUser.model);
            $("#procesorProd").val(objUser.procesor);
            $("#osProd").val(objUser.os);
            $("#descriptionProd").val(objUser.description);
            $("#memoryProd").val(objUser.memory);
            $("#hardDriveProd").val(objUser.hardDrive);
            $("#availabilityProd").val(objUser.availability);
            $("#priceProd").val(objUser.price);
            $("#quantityProd").val(objUser.quantity);
            $("#photography").val(objUser.photography);
        }

        function closeForm() {
            document.getElementById("myForm").style.display = "none";
            $("#brandProd").val("");
            $("#modelProd").val("");
            $("#procesorProd").val("");
            $("#osProd").val("");
            $("#descriptionProd").val("");
            $("#memoryProd").val("");
            $("#hardDriveProd").val("");
            $("#availabilityProd").val("");
            $("#priceProd").val("");
            $("#quantityProd").val("");
            $("#photography").val("");
        }
    </script>
</body>

</html>